<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown to Date</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
    </style>
</head>
<body>
    <h1>Countdown to Specific Date</h1>
    <p id="countdown">Loading...</p>

    <script>
        // Set the target date
        const targetDate = new Date('2026-01-31');

        // Function to fetch Italian holidays from Calendarific API
        async function fetchItalianHolidays(year) {
            const apiKey = 'L999oHZb4ZSSgvoJStvdLuc2D9LryfKy'; // Replace with your Calendarific API key
            const url = `https://calendarific.com/api/v2/holidays?&api_key=${apiKey}&country=IT&year=${year}`;

            try {
                const response = await fetch(url);
                const data = await response.json();
                return data.response.holidays.map(holiday => new Date(holiday.date.iso));
            } catch (error) {
                console.error('Error fetching holidays:', error);
                return [];
            }
        }

        function isHoliday(date, holidays) {
            return holidays.some(holiday => holiday.getTime() === date.getTime());
        }

        function calculateBusinessDays(startDate, endDate, holidays) {
            let count = 0;
            let currentDate = new Date(startDate);

            while (currentDate <= endDate) {
                const dayOfWeek = currentDate.getDay();
                if (dayOfWeek !== 0 && dayOfWeek !== 6 && !isHoliday(currentDate, holidays)) {
                    count++;
                }
                currentDate.setDate(currentDate.getDate() + 1);
            }

            return count;
        }

        async function updateCountdown() {
            const today = new Date();
            const year = today.getFullYear();
            const holidays = await fetchItalianHolidays(year);
            const businessDays = calculateBusinessDays(today, targetDate, holidays);
            document.getElementById('countdown').textContent = `Business days until ${targetDate.toLocaleDateString('it-IT')}: ${businessDays}`;
        }

        updateCountdown();
    </script>
</body>
</html>
